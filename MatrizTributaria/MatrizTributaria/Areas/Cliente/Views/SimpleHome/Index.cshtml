
@using PagedList.Mvc
@using MatrizTributaria.Areas.Cliente.Models

@model PagedList.IPagedList<MatrizTributaria.Areas.Cliente.Models.AnaliseTributariaNCM>
@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/Cliente/Views/Shared/_Layout_simples .cshtml";
}

<!--ACTION NOVA-->
@RenderPage("~/Areas/Cliente/Views/Acoes/CardInicialSimplesMTX.cshtml") <!--Renderiza o card inicial-->


<div class="container-fluid pr-card-cad">


    <div class="card">
        <div class="card-header">
            Estado : @ViewBag.UfOrigem
        </div> <!--CAbeçalho-->
        <div class="card-body">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="container-fluid p-1">
                            <!--esta estrutura envolve toda a tabela-->
                            <div style="overflow-x:auto !important;">

                                <table style="border-bottom: 1px solid #111; display: block; overflow-x: auto; border-collapse: collapse; white-space: nowrap;" class="table table-striped table-hover" id="tablepr-2">
                                    <!--Cabeçaçho-->
                                    <thead style="font-size: 12px; color: #ffffff; font-weight: 100 !important" class="pr-thead">
                                        <!--primeira row-->
                                        <tr>
                                            <th style="text-align:center; border:none;" colspan="5" class="pr-fonte2 pr-thtd prn-borderEspecial" scope="col">Produto</th>

                                            <th style="text-align:center; border:none;" colspan="4" class="pr-fonte2 pr-thtd prn-borderEspecial" scope="col">PIS de Saída</th>

                                            <th style="text-align:center; border:none;" colspan="4" class="pr-fonte2 pr-thtd prn-borderEspecial" scope="col">Cofins de Saída</th>

                                            <th style="text-align:center; border:none;" colspan="10" class="pr-fonte2 pr-thtd prn-borderEspecial" scope="col">ICMS Venda</th>




                                        </tr>

                                        <!--Row para mostrar os dados-->
                                        <tr>
                                            <!--Produto-->
                                            <th class="prn-borderEspecial3" scope="col">ID</th>
                                            <th class="prn-borderEspecial3" scope="col"> Código de Barras </th>
                                            <th class="prn-borderEspecial3" scope="col"> Descrição </th>
                                            <th class="prn-borderEspecial3" scope="col">Cest</th>
                                            <th class="prn-borderEspecial3" scope="col">NCM</th>



                                            <!--Pis-->
                                            <th scope="col" class="text-center  prn-borderEspecial3">CST Antes</th>
                                            <th scope="col" class="text-center  prn-borderEspecial3">CST Atual</th>
                                            <th scope="col" class="text-center prn-borderEspecial3">Aliq(%) Antes</th>
                                            <th scope="col" class="text-center prn-borderEspecial3">Aliq(%) Atual</th>

                                            <!--Cofins-->
                                            <th scope="col" class="text-center  prn-borderEspecial3">CST Antes</th>
                                            <th scope="col" class="text-center  prn-borderEspecial3">CST Atual</th>
                                            <th scope="col" class="text-center prn-borderEspecial3">Aliq(%) Antes</th>
                                            <th scope="col" class="text-center prn-borderEspecial3">Aliq(%) Atual</th>

                                            <!--Icms venda varejo consumidor final-->
                                            <th scope="col" class="text-center  prn-borderEspecial3">CST Antes</th>
                                            <th scope="col" class="text-center  prn-borderEspecial3">CST Atual</th>
                                            <th scope="col" class="text-center  prn-borderEspecial3">Aliq(%) Antes</th>
                                            <th scope="col" class="text-center  prn-borderEspecial3">Aliq(%) Atual</th>
                                            <th scope="col" class="text-center  prn-borderEspecial3">Aliq ST(%) Antes</th>
                                            <th scope="col" class="text-center  prn-borderEspecial3">Aliq ST(%) Atual</th>
                                            <th scope="col" class="text-center  prn-borderEspecial3">Red.(%) Antes</th>
                                            <th scope="col" class="text-center  prn-borderEspecial3">Red.(%) Atual</th>
                                            <th scope="col" class="text-center prn-borderEspecial3">Red. ST(%) Antes</th>
                                            <th scope="col" class="text-center prn-borderEspecial3">Red. ST(%) Atual</th>



                                        </tr>
                                    </thead>



                                    <!--Corpo-->
                                    <tbody>
                                        @foreach (var item in Model)
                                        {
                                            <tr style="height:12.0px;" class="pr-td prn-borderEspecial6">
                                                <td style="width:5%" class="text-left prn-borderEspecial2">
                                                    @Html.DisplayFor(modelItem => item.TE_ID)
                                                </td>

                                                <td style="width:10%" class="text-left prn-borderEspecial2">
                                                    @Html.DisplayFor(modelItem => item.PRODUTO_COD_BARRAS)
                                                </td>
                                                <td style="width:30%" class="text-left prn-borderEspecial2">
                                                    @Html.DisplayFor(modelItem => item.PRODUTO_DESCRICAO)
                                                </td>


                                                <td style="width:10%;" class="text-center prn-borderEspecial2">
                                                    @item.PRODUTO_CEST
                                                </td>
                                                <td style="width:10%;" class="text-center  prn-borderEspecial4">
                                                    @item.PRODUTO_NCM
                                                </td>

                                                <!--pIS-->
                                                <td style="width: 5%;" class="text-center pr-td-anterior prn-borderEspecial6 prn-imp">

                                                    @foreach (var dado in ViewBag.DadosClientes)
                                                    {
                                                        if (item.PRODUTO_COD_BARRAS == dado.PRODUTO_COD_BARRAS)
                                                        {
                                                            <span>@dado.CST_SAIDA_PIS_COFINS</span>
                                                            break;
                                                        }

                                                    }

                                                </td>
                                                <td style="width:5%;" class="text-center prn-borderEspecial2">
                                                    @item.CST_SAIDA_PIS_COFINS
                                                </td>

                                                <!--Aliquota PIS-->
                                                <td style="width: 5%;" class="text-center pr-td-anterior prn-borderEspecial6 prn-imp">

                                                    @foreach (var dado in ViewBag.DadosClientes)
                                                    {
                                                        if (item.PRODUTO_COD_BARRAS == dado.PRODUTO_COD_BARRAS)
                                                        {
                                                            <span>@dado.ALIQ_SAIDA_PIS</span>
                                                            break;
                                                        }

                                                    }

                                                </td>

                                                <td style="width:5%;" class="text-center prn-borderEspecial4">
                                                    @item.ALIQ_SAIDA_PIS
                                                </td>


                                                <!--Cofins-->
                                                <td style="width: 5%;" class="text-center pr-td-anterior prn-borderEspecial6 prn-imp">

                                                    @foreach (var dado in ViewBag.DadosClientes)
                                                    {
                                                        if (item.PRODUTO_COD_BARRAS == dado.PRODUTO_COD_BARRAS)
                                                        {
                                                            <span>@dado.CST_SAIDA_PIS_COFINS</span>
                                                            break;
                                                        }

                                                    }

                                                </td>
                                                <td style="width:5%;" class="text-center prn-borderEspecial2">
                                                    @item.CST_SAIDA_PIS_COFINS
                                                </td>

                                                <!--Aliquota PIS-->
                                                <td style="width: 5%;" class="text-center pr-td-anterior prn-borderEspecial6 prn-imp">

                                                    @foreach (var dado in ViewBag.DadosClientes)
                                                    {
                                                        if (item.PRODUTO_COD_BARRAS == dado.PRODUTO_COD_BARRAS)
                                                        {
                                                            <span>@dado.ALIQ_SAIDA_COFINS</span>
                                                            break;
                                                        }

                                                    }

                                                </td>

                                                <td style="width:5%;" class="text-center prn-borderEspecial4">
                                                    @item.ALIQ_SAIDA_COFINS
                                                </td>

                                                <!--Venda varejo consumidor final-->
                                                <td style="width: 5%;" class="text-center pr-td-anterior prn-borderEspecial6 prn-imp">

                                                    @foreach (var dado in ViewBag.DadosClientes)
                                                    {
                                                        if (item.PRODUTO_COD_BARRAS == dado.PRODUTO_COD_BARRAS)
                                                        {
                                                            <span>@dado.CST_VENDA_VAREJO_CONS_FINAL</span>
                                                            break;
                                                        }

                                                    }

                                                </td>
                                                <td style="width:5%;" class="text-center prn-borderEspecial2">
                                                    @item.CST_VENDA_VAREJO_CONS_FINAL
                                                </td>

                                                <td style="width: 5%;" class="text-center pr-td-anterior prn-borderEspecial6 prn-imp">

                                                    @foreach (var dado in ViewBag.DadosClientes)
                                                    {
                                                        if (item.PRODUTO_COD_BARRAS == dado.PRODUTO_COD_BARRAS)
                                                        {
                                                            <span>@dado.ALIQ_ICMS_VENDA_VAREJO_CONS_FINAL</span>
                                                            break;
                                                        }

                                                    }

                                                </td>
                                                <td style="width:5%;" class="text-center prn-borderEspecial2">
                                                    @item.ALIQ_ICMS_VENDA_VAREJO_CONS_FINAL
                                                </td>

                                                <td style="width: 5%;" class="text-center pr-td-anterior prn-borderEspecial6 prn-imp">

                                                    @foreach (var dado in ViewBag.DadosClientes)
                                                    {
                                                        if (item.PRODUTO_COD_BARRAS == dado.PRODUTO_COD_BARRAS)
                                                        {
                                                            <span>@dado.ALIQ_ICMS_ST_VENDA_VAREJO_CONS_FINAL</span>
                                                            break;
                                                        }

                                                    }

                                                </td>
                                                <td style="width:5%;" class="text-center prn-borderEspecial2">
                                                    @item.ALIQ_ICMS_ST_VENDA_VAREJO_CONS_FINAL
                                                </td>

                                                <td style="width: 5%;" class="text-center pr-td-anterior prn-borderEspecial6 prn-imp">

                                                    @foreach (var dado in ViewBag.DadosClientes)
                                                    {
                                                        if (item.PRODUTO_COD_BARRAS == dado.PRODUTO_COD_BARRAS)
                                                        {
                                                            <span>@dado.RED_BASE_CALC_ICMS_VENDA_VAREJO_CONS_FINAL</span>
                                                            break;
                                                        }

                                                    }

                                                </td>
                                                <td style="width:5%;" class="text-center prn-borderEspecial2">
                                                    @item.RED_BASE_CALC_ICMS_VENDA_VAREJO_CONS_FINAL
                                                </td>

                                                <td style="width: 5%;" class="text-center pr-td-anterior prn-borderEspecial6 prn-imp">

                                                    @foreach (var dado in ViewBag.DadosClientes)
                                                    {
                                                        if (item.PRODUTO_COD_BARRAS == dado.PRODUTO_COD_BARRAS)
                                                        {
                                                            <span>@dado.RED_BASE_CALC_ICMS_ST_VENDA_VAREJO_CONS_FINAL</span>
                                                            break;
                                                        }

                                                    }

                                                </td>
                                                <td style="width:5%;" class="text-center prn-borderEspecial2">
                                                    @item.RED_BASE_CALC_ICMS_ST_VENDA_VAREJO_CONS_FINAL
                                                </td>




                                            </tr>

                                        }


                                    </tbody>

                                </table><!--fim da table-->


                                <div class="d-flex">
                                    <div class="mr-auto p-1">

                                        <p class="pr-fontanternativa">

                                            <span class="pr-fontalternativa">Página @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) de @Model.PageCount - Total de registros: @Model.TotalItemCount</span>
                                        </p>
                                    </div>

                                    <div style="float:right;" class="p-1 pr-fontalternativa">
                                        @Html.PagedListPager(
                                                            Model,
                                                            page => Url.Action("Index",
                                                            new
                                                            {
                                                                page,
                                                                filtroCorrente = ViewBag.FiltroCorrente,
                                                                numeroLinhas = ViewBag.NumeroLinhas,
                                                                filtroCorrenteNCM = ViewBag.FiltroCorrenteNCM,
                                                                filtroCorrenteCEST = ViewBag.FiltroCorrenteCEST,
                                                                filtroSetor = ViewBag.FiltroCorrenteSetor,
                                                                filtroCorrenteAudNCM = ViewBag.FiltroCorrenteAuditado,
                                                                ordenacao = ViewBag.ParametroProduto,
                                                                filtroCate = ViewBag.FiltroCorrenteCate,
                                                                filtraPor = ViewBag.FiltroFiltraPor,
                                                                filtraCST = ViewBag.FiltroCST

                                                            }),
                                                            new PagedListRenderOptions()
                                                            {
                                                                LiElementClasses = new List<string> { "page-item" }
                                                            })
                                    </div>

                                </div>



                            </div> <!--fim do overflow que envolve a table-->





                        </div>
                    </div>
                </div>
            </div>
        </div><!--body-->
    </div><!--card-->

</div> <!--container maior-->
